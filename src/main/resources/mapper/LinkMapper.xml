<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTO Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="links">
    <insert id="save" parameterType="String">
        insert into T_link(LINK)
        values (#{link})
    </insert>
    <insert id="save_tci" parameterType="String">
        insert into T_link(LINK, TITLE, CONTENTS, IMAGE, M_ID)
        values (#{LINK}, #{TITLE}, #{CONTENTS}, #{IMAGE}, #{M_ID})
    </insert>
    <insert id="signin" parameterType="user">
        insert into T_USER_LINKTREE(M_ID, M_PWD)
        values (#{M_ID}, #{M_PWD})
    </insert>
    <select id="show" resultType="link">
        SELECT * FROM T_link WHERE M_ID = #{M_ID}
    </select>
    <select id="login" parameterType="user" resultType="user">
        SELECT * FROM T_USER_LINKTREE WHERE M_ID = #{M_ID} AND M_PWD = #{M_PWD}
    </select>
    <delete id="delete" parameterType="int">
        DELETE FROM T_link WHERE ID=#{ID}
    </delete>
    <resultMap id="resultUserVO"
               type="com.mini_project.dto.UserVO">
        <result property="M_ID" column="M_ID" />
        <result property="M_PWD" column="M_PWD" />
        <result property="AUTHORITY" column="AUTHORITY" />
        <result property="ENABLED" column="ENABLED" />
    </resultMap>
    <select id="getUserById" parameterType="String" resultMap="resultUserVO">
        SELECT
            M_ID
             , M_PWD
             , ENABLED
             , AUTHORITY
        FROM T_USER_LINKTREE
        WHERE M_ID = #{M_ID}
    </select>
</mapper>